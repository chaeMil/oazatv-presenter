<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>oh! Presenter [alpha]</title>
    <link rel="stylesheet" href="../../../node_modules/electron-photon/dist/photon.css">
    <link rel="stylesheet" href="../../../node_modules/ionicons/dist/css/ionicons.min.css">
    <link rel="stylesheet" href="../../../node_modules/open-iconic/font/css/open-iconic.min.css">
    <link rel="stylesheet" href="../../shared/assets/css/main.scss">
    <link rel="stylesheet" href="../assets/main.scss">
</head>
<body>
<ph-window>
    <tool-bar type="header">
        <h1 class="title" style="-webkit-app-region: drag;">Canvas Designer</h1>
        <div class="toolbar-actions" style="text-align: left; float: left;">
            <button class="btn btn-default" data-bind="click: VM.saveCanvas">Save</button>
            <button class="btn btn-default" data-bind="click: VM.loadCanvas">Load</button>
            <button class="btn btn-default" data-bind="click: VM.deleteSelectedObjects">Delete</button>
        </div>
        <div class="toolbar-actions" style="text-align: right; float: right;">
            <button class="btn btn-default" data-bind="click: VM.broadcastToCanvas">Broadcast to canvas</button>
        </div>
    </tool-bar>
    <window-content>
        <div class="pane-group">
            <div class="pane-sm sidebar canvas-elements">
                <h5 class="nav-group-title">Basic Elements</h5>
                <nav-item data-bind="click: VM.addTextbox">
                    <div class="icon">
                        <span class="oi" data-glyph="text"></span>
                    </div>
                    Text
                </nav-item>
                <nav-item data-bind="click: VM.addText">
                    <div class="icon">
                        <span class="oi" data-glyph="text"></span>
                    </div>
                    Text
                </nav-item>
                <nav-item data-bind="click: VM.addRectangle">
                    <div class="icon">
                        <span class="oi" data-glyph="media-stop"></span>
                    </div>
                    Square
                </nav-item>
                <nav-item data-bind="click: VM.addCircle">
                    <div class="icon">
                        <span class="oi" data-glyph="media-record"></span>
                    </div>
                    Circle
                </nav-item>
                <!--<nav-item data-bind="click: VM.addVideo">
                    <div class="icon">
                        <span class="oi" data-glyph="video"></span>
                    </div>
                    Video
                </nav-item>-->
                <nav-item data-bind="click: VM.addImage">
                    <div class="icon">
                        <span class="oi" data-glyph="image"></span>
                    </div>
                    Image
                </nav-item>
            </div>
            <div class="pane" id="canvas-wrapper">
                <canvas id="canvas" width="1280" height="720"></canvas>
            </div>
            <div class="pane pane-sm sidebar">
                <div id="object-editor" class="editor hidden">
                    <h5 class="nav-group-title">Object editor</h5>
                    <div class="editor-inner">
                        ScaleX: <input type="range" class="slider slider-square blue"
                                       min="0.01" max="10" step="any"
                                       data-bind="value: VM.objectEditorValues.scaleX"/>
                        ScaleX: <input type="range" class="slider slider-square blu"
                                       min="0.01" max="10" step="any"
                                       data-bind="value: VM.objectEditorValues.scaleY"/>
                    </div>
                </div>
                <div id="video-controls" class="editor hidden">
                    <h5 class="nav-group-title">Video controls</h5>
                    <div class="editor-inner">
                        Progress: <input type="range" class="slider slider-round gray"
                                         min="0.0" max="" step="any"
                                         data-bind="attr: {value: VM.videoControlValues.videoTime, max: VM.videoControlValues.videoDuration}"/>
                    </div>
                </div>
                <div id="text-editor" class="editor hidden">
                    <h5 class="nav-group-title">Text editor</h5>
                    <div class="editor-inner">
                        Font: <select data-bind="options: VM.availableFonts, value: VM.textEditorValues.fontFamily"></select>
                        <br>
                        Color: <input type="text" value=""
                                      data-bind="value: VM.textEditorValues.color"/>
                    </div>
                </div>
            </div>
        </div>
    </window-content>
</ph-window>

<script>
    const CanvasDesignerViewModel = require('../viewmodel/canvas_designer_viewmodel.js');

    let ko = require('knockout');
    let {ipcRenderer, webFrame} = require('electron');

    webFrame.setVisualZoomLevelLimits(1, 1);
    webFrame.setLayoutZoomLevelLimits(0, 0);

    let VM = new CanvasDesignerViewModel(ko, ipcRenderer);
    document.addEventListener('DOMContentLoaded', () => {
        VM.init();
    });
</script>
</body>
</html>